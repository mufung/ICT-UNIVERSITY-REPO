<!DOCTYPE html>
<html>
<head>
  <title>Signing you in...</title>
  <script src="https://cdn.jsdelivr.net/npm/jwt-decode@3.1.2/build/jwt-decode.min.js"></script>
</head>

<body>
  <p>Authenticating...</p>

<script>
const hash = window.location.hash.substring(1);
const params = new URLSearchParams(hash);
const idToken = params.get("id_token");

if (!idToken) {
  window.location.href = "signin.html";
}

sessionStorage.setItem("idToken", idToken);

const decoded = jwt_decode(idToken);
const groups = decoded["cognito:groups"] || [];

if (groups.includes("Students")) {
  window.location.href = "dashboard_student.html";
}
else if (groups.includes("Teachers")) {
  window.location.href = "dashboard_teacher.html";
}
else {
  alert("No role assigned. Contact admin.");
  window.location.href = "signin.html";
}
</script>

</body>
</html>
