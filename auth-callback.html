<!DOCTYPE html>
<html>
<head>
  <title>Signing in...</title>
  <script src="https://cdn.jsdelivr.net/npm/jwt-decode@3.1.2/build/jwt-decode.min.js"></script>
</head>
<body>
  <p>Signing you in...</p>

  <script>
    const hash = window.location.hash.substring(1);
    const params = new URLSearchParams(hash);
    const idToken = params.get("id_token");

    if (!idToken) {
      alert("Login failed.");
      window.location.href = "index.html";
    } else {
      const user = jwt_decode(idToken);
      const groups = user["cognito:groups"] || [];

      if (groups.includes("Teachers")) {
        window.location.href = "dashboard_teacher.html?id_token=" + idToken;
      } else if (groups.includes("Students")) {
        window.location.href = "dashboard_student.html?id_token=" + idToken;
      } else {
        alert("No role assigned.");
        window.location.href = "index.html";
      }
    }
  </script>
</body>
</html>
